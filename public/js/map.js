
const SpriteWidth = 64;
const SpriteHeight = 64;
const ScaleFactor = 4;
const CANVAS = document.getElementById("map");
const CONTEXT = CANVAS.getContext("2d");
CANVAS.width = 1600;
CANVAS.height = 960;
CONTEXT.imageSmoothingEnabled = false;
let map = [
    [
        [0], [0], [0], [0], [0], [0], [0], [0], [0], [0],
        [0, 59, 90], [0, 59], [0, 59], [0, 59], [0, 59], [0, 59],
        [0], [0], [0], [0], [0], [0], [0], [0]
    ],
    [
        [0], [0], [0], [0], [0], [0], [0],
        [0, 59, 89, 89, 90], [0, 93], [0, 93], [0, 41, 79, 55], [0, 41, 79], [0, 41],
        [0, 41], [0, 41], [0, 41], [0, 55], [0], [0], [0], [0], [0], [0], [0], [0]
    ],
    [
        [0], [0], [0], [0], [0], [0], [0], [0],
        [0, 32, 55], [0, 35], [0, 29], [0, 29, 80], [0, 41, 80], [0, 41], [0, 41],
        [0, 41], [0, 41], [0, 55], [0], [0], [0], [0], [0], [0], [0], [0]
    ],
    [
        [0], [0], [0], [0], [0], [0], [0], [0], [0],
        [0, 29, 55], [0, 29], [0, 29], [0, 29], [0, 29], [0, 29, 33],
        [0, 81, 89], [0, 41, 59], [0, 55], [0], [0], [0], [0], [0], [0], [0], [0]
    ],
    [
        [0], [0], [0], [0], [0], [0], [0], [0],
        [0, 92], [0, 29, 55], [0, 29], [0, 32], [0, 32, 29], [0, 29], [0, 29],
        [0, 29], [0, 63], [0], [0], [0], [0], [0], [0], [0], [0], [0]
    ],
    [
        [0], [0], [0], [0], [0], [0], [0],
        [0, 28, 55, 70, 55], [0, 29], [0, 29], [0, 32], [0, 32, 39],
        [0, 32, 29], [0, 29, 39], [0, 29], [0, 63], [0], [0], [0], [0], [0], [0], [0]
    ],
    [
        [0], [0], [0], [0], [0], [0], [0],
        [0, 33, 55, 64, 55], [0, 29], [0, 29], [0, 29], [0, 29],
        [0, 32, 39], [0, 29], [0, 29], [0, 63], [0], [0], [0], [0], [0], [0], [0]
    ],
    [
        [0], [0], [0], [0], [0], [0], [0],
        [0, 33, 55], [0, 29], [0, 29, 24], [0, 29, 24], [0, 29],
        [0, 29], [0, 29], [0, 29, 33], [0, 63], [0], [0], [0], [0], [0], [0], [0]
    ],
    [
        [0], [0], [0], [0], [0], [0], [0],
        [0, 29, 55], [0, 29], [0, 29, 24], [0, 29, 24], [0, 29],
        [0, 29], [0, 29], [0, 29, 33], [0, 63], [0], [0], [0], [0], [0], [0], [0]
    ],
    [
        [0], [0], [0], [0], [0], [0], [0],
        [0, 29, 60], [0, 29, 59], [0, 29, 59], [0, 29, 59], [0, 29, 59],
        [0, 29, 59], [0, 29, 59], [0, 29, 29, 33, 59], [0, 63, 59],
        [0], [0], [0], [0], [0], [0], [0]
    ],
    [
        [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0],
        [0], [0], [0], [0], [0], [0], [0], [0], [0], [0]
    ]
]



function readMap(map){
    let currentTile;
    const path="../../img/sprites/";
    let x;
    let y;
    for(let i = 0;i<map.length;i++){
        for(let j =0; j <map[i].length;j++){
            for(let k =0;k<map[i][j].length;k++){
                currentTile=map[i][j][k];
                if(currentTile===0){
                    continue;
                }
                currentTile=currentTile.toString().concat(".png");
                drawTile(path.concat(currentTile),j*SpriteWidth,i*SpriteHeight);
            }
        }
    }
}



function drawTile(tileSrc,x,y){
    let img=new Image();
    img.src=tileSrc;
    img.onload=()=>{
        CONTEXT.drawImage(img,x,y,img.naturalWidth*ScaleFactor ,img.naturalHeight*ScaleFactor);

    }
    

    //CONTEXT.drawImage("C:\\Users\\Hurtcraft\\Desktop\\JeuJS\\img\\sprites\\0.png",0,0);
}
//drawTile("../../img/sprites/5.png",0,0);
readMap(map);